/*! Premise-WP 2016-05-15 */
(function(a){a.fn.premiseFieldFaIcon=function(b){var c=a.extend({},a.fn.premiseFieldFaIcon.defaults,b);if(this.length===0){return this}if(this.length>1){this.each(function(){a(this).premiseFieldFaIcon(b)});return this}var d=this,e=a(d).find(".premise-field-fa_icon"),f=e.find(".premise-fa_icon"),g=e.find(".premise-choose-icon"),h=e.find(".premise-remove-icon"),i=a(d).find(".premise-field-fa-icons-container"),j=i.find(".premise-field-fa-icon-anchor"),k=a("body"),l=a(document),m=false;var n=function(){g.click(o);h.click(r);f.keyup(t)};var o=function(){i.slideToggle("fast",function(){!m&&i.is(":visible")?p():q()})};var p=function(){k.addClass("premise-field-fa-icon-container-visible");s();l.trigger("premiseFieldAfterFaIconsOpen",[i,a(d)]);m=true};var q=function(){k.removeClass("premise-field-fa-icon-container-visible");l.trigger("premiseFieldAfterFaIconsClose",[i,a(d)]);m=false};var r=function(){f.val("")};var s=function(){j.off().click(function(){var b=a(this).attr("data-icon");f.val(b);o();return false})};var t=function(){var b=f.val();if(!m&&1>=b.length){o()}j.each(function(c,d){var e=a(this),f=e.attr("data-icon"),g=e.parents(".premise-field-fa-icon-li");!f.match(b)?g.hide():g.show()})};n();return this};a.fn.premiseFieldFaIcon.defaults={}})(jQuery);(function(a){a.fn.premiseFieldWpMedia=function(b){if(this.length===0){return this}var c=a.extend({},a.fn.premiseFieldWpMedia.defaults,b);var d=this;var e=a(d),f,g,h,i,j=[];if(this.length>1){this.each(function(){a(this).premiseFieldWpMedia(b)});return this}var k=function(){if(!e.is('input[type="text"]')){console.error('premiseFieldWpMedia() must be called on an input element with type="text".');return false}f=e.parent();if(c.preview&&""!==e.val()){var b=e.val().split(",");for(var d=b.length-1;d>=0;d--){if(b[d].match(/(jpg|png|gif|jpeg)/gi)){j.push(b[d])}}o()}var i=e.attr("data-options");if(""!==i){var k=a.parseJSON(i);c=a.extend({},c,k)}if(c.wrap)e.wrap('<div class="premise-field-wp_media"></div>');q();g.click(l);h.click(n)};var l=function(){if(!wp.media){console.error("wp.media object is undefined. Make sure Wordpress Media Uploader Scripts are enqueued.");return false}if(i){i.open();return}i=wp.media.frames.file_frame=wp.media({title:"Upload Media",button:{text:"Insert Media"},multiple:c.multiple});i.on("select",function(){var b=i.state().get("selection").toJSON();j=[];a(b).each(function(a,b){if("id"===c.return){j.push(b.id)}else if("url"===c.return){var d="image"==b.type&&b.subtype.match(/(jpg|png|gif|jpeg)/gi)?b.sizes[c.imageSize].url:b.url;j.push(d)}});m()});i.open()};var m=function(){e.val(j.join());if(c.preview&&"url"==c.return)o()};var n=function(){e.val("");return false};var o=function(){if(j.length>0){var b=f.find(".premise-wp_media-preview"),c=j.length;if(!b.length){f.append(a('<div class="premise-wp_media-preview"></div>'));b=f.find(".premise-wp_media-preview")}b.html(p())}};var p=function(){var a='<div class="premise-row premise-wp_media-preview-inner">';if(j.length>1){for(var b=0;b<j.length;b++){var c=6>j.length?j.length:6;a+='<span class="premise-preview-thumb col'+c+'" style="background-image: url('+j[b]+');"></span>'}}else{a+='<span class="premise-preview-thumb span12" style="background-image: url('+j[0]+');"></span>'}a+="</div>";console.log(a);return a};var q=function(){h=e.siblings(".premise-btn-remove");g=e.siblings(".premise-btn-upload");if(!h.length){h=a('<a class="premise-btn-remove" href="javascript:void(0);"><i class="fa fa-fw fa-times"></i></a>');f.append(h)}if(!g.length){g=a('<a class="premise-btn-upload" href="javascript:void(0);"><i class="fa fa-fw fa-upload"></i></a>');f.append(g)}};k();return this};a.fn.premiseFieldWpMedia.defaults={multiple:false,imageSize:"full","return":"url",preview:false,wrap:true}})(jQuery);(function(a){a.fn.premiseFieldYouTube=function(b){if(this.length===0){return this}var c=a.extend({},a.fn.premiseFieldYouTube.defaults,b);var d=this,e;if(this.length>1){this.each(function(){a(this).premiseFieldYouTube(b)});return this}c.videoId=c.videoId.length?c.videoId:d.attr("data-premise-youtube-video-id");c.playerVars.autoplay=c.playerVars.autoplay||c.autoplay;c.playerVars.playlist=c.playerVars.playlist||c.playlist;c.playerVars.loop=c.playerVars.loop||c.loop;var f=function(){"undefined"===typeof YT?h():g()};var g=function(){e=new YT.Player(d[0],{height:c.height,width:c.width,videoId:c.videoId,playerVars:c.playerVars,events:c.events});-1!==c.volume?e.setVolume(c.volume):console.log(false)};var h=function(){window.onYouTubeIframeAPIReady=g;var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};f();return this};a.fn.premiseFieldYouTube.ready=function(){console.log("premiseFieldYouTube Player Ready");player.setVolume(opts.volume)};a.fn.premiseFieldYouTube.defaults={videoId:[],height:"390",width:"640",playerVars:{},events:{onReady:a.fn.premiseFieldYouTube.ready},autoplay:0,loop:0,playlist:[],mute:false,volume:-1}})(jQuery);var PremiseField={init:function(){this.bindEvents();var a=document.createElement("script");a.innerHTML="function onYouTubeIframeAPIReady(){return ( jQuery( '.premise-youtube-video' ).length ) ? PremiseField.YTPlayer.init() : false;}";jQuery(document).trigger("premiseFieldAfterInit",this)},bindEvents:function(){jQuery(".premise-wp-media-field").premiseFieldWpMedia();jQuery(".premise-field-type-fa_icon").premiseFieldFaIcon();var a=jQuery(".premise-youtube-video").premiseFieldYouTube();console.log(a);jQuery(document).on("premiseFieldAfterInit",function(){console.log("PremiseField Object Initited successfully.")})}};function premiseSameHeight(a){a=a||".premise-same-height";var b=0,c;var d=jQuery(a).each(function(){if(c){return false}c=jQuery(this).attr("data-height");if(c){b=c;return false}var a=jQuery(this).outerHeight();if(a>b){b=a}});var e=jQuery(a).css("min-height",b);jQuery.when(d).done(e);return false}function premiseCountVisibleElements(a){a=a||[];var b=0;a.each(function(a,c){if(jQuery(c).is(":visible")){b++}});return b}function premiseBrowserName(){var a=navigator.userAgent.toLowerCase();if(a.indexOf("opera")!=-1)return"Opera";if(a.indexOf("staroffice")!=-1)return"Star Office";if(a.indexOf("webtv")!=-1)return"WebTV";if(a.indexOf("beonex")!=-1)return"Beonex";if(a.indexOf("chimera")!=-1)return"Chimera";if(a.indexOf("netpositive")!=-1)return"NetPositive";if(a.indexOf("phoenix")!=-1)return"Phoenix";if(a.indexOf("firefox")!=-1)return"Firefox";if(a.indexOf("chrome")!=-1)return"Chrome";if(a.indexOf("safari")!=-1)return"Safari";if(a.indexOf("skipstone")!=-1)return"SkipStone";if(a.indexOf("msie")!=-1)return"Internet Explorer";if(a.indexOf("netscape")!=-1)return"Netscape";if(a.indexOf("mozilla/5.0")!=-1)return"Mozilla";if(a.indexOf("/")!=-1){if(a.substr(0,a.indexOf("/"))!="mozilla"){return navigator.userAgent.substr(0,a.indexOf("/"))}else return"Netscape"}else if(a.indexOf(" ")!=-1)return navigator.userAgent.substr(0,a.indexOf(" "));else return navigator.userAgent}jQuery(function(a){a(document).ready(function(){Premise.init()})});var Premise={init:function(){PremiseField.init()}};