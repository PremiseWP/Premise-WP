/*! Premise-WP 2016-12-06 */
(function(a){a.fn.premiseDynamicColumns=function(b){if(this.length===0){return this}var c=a.extend({},a.fn.premiseDynamicColumns.defaults,b);var d=this;if(this.length>1){this.each(function(){a(this).premiseDynamicColumns(b)});return this}var e=function(){if(!d.is(".premise-dynamic-row"))d.addClass("premise-dynamic-row");"row"==c.grid?d.addClass("premise-row"):d.addClass("premise-inline");var a=[2,3,4,5,6],b=d.children(),e=0,f=6;if(b.length){e=b.length;for(var g=a.length-1;g>=0;g--){if(e%a[g]===0){f=a[g];b.addClass("premise-dyn-col col"+f);return}}b.addClass("premise-dyn-col col"+f)}return};e();return this};a.fn.premiseDynamicColumns.defaults={grid:"row"}})(jQuery);(function(a){a.fn.premiseFieldDuplicate=function(b){if(this.length===0){return this}var c=a.extend({},a.fn.premiseFieldDuplicate.defaults,b);if(this.length>1){this.each(function(){a(this).premiseFieldDuplicate(options)});return}var d=a(this),e=[],f=[],g='<button class="button pwpfd-button pwpfd-clone"><i class="fa fa-clone"></i> Clone</button>',h='<button class="button button-wraning pwpfd-button pwpfd-remove"><i class="fa fa-close"></i> Remove</button>';var i=function(){l();m();n();c.autoDuplicate?f.change(j):false;c.displayAddButton?d.find(".pwpfd-clone").click(j):false},j=function(a){a.preventDefault();if(!p()){k()}return false},k=function(){var b=d.find(".pwpfd-duplicate-this"),c=b.attr("data-duplicate-count"),f=b.clone(),g=+c+1;b.attr("data-duplicate-count",g);e.each(function(){a(this).val("")});o(e,c,g);d.before(f.addClass("pwpfd-duplicated").append(h));q()};i();return this;function l(){d.addClass("pwpfd-duplicator");d.children().wrapAll('<div class="pwpfd-duplicate-this"></div>');if(!d.parents(".pwpfd-wrapper").length)d.wrap('<div class="pwpfd-wrapper"></div>');if(c.displayAddButton&&!d.find(".pwpfd-clone").length)d.find(".pwpfd-duplicate-this").append(g)}function m(){e=d.find("select, input, textarea");if(e.prop("required")){e.each(function(b,c){a(this).prop("required")?a(this).addClass("pwpfd-field"):false})}else{e.addClass("pwpfd-field")}f=d.find(".pwpfd-field")}function n(){var b=c.startCount;d.parents(".pwpfd-wrapper").find(".pwpfd-duplicate-this").each(function(){var c=a(this),d=c.attr("data-duplicate-count")?c.attr("data-duplicate-count"):b,e=c.find("select, input, textarea");o(e,d,b);if(!c.find(".pwpfd-remove").length&&!c.parents(".pwpfd-duplicator").length)c.append(h);c.attr("data-duplicate-count",b);b++});q()}function o(b,c,e){b=b||[];var f=new RegExp("(["+c+"])","gi"),g=new RegExp("(-"+c+")$","gi");b.each(function(b,h){var i=a(this),j=i.attr("id"),k=i.attr("name");if(k&&""!==k){if(k.match(/^.*(\[|\]).*$/g)){if("undefined"!==typeof e){i.attr("name",k.replace(f,e))}else if(!k.match(f)){i.attr("name",k+"["+c+"]")}}else{i.attr("name",k+"["+c+"]")}}if(j&&""!==j){if(j.match(g)){d.parents(".pwpfd-wrapper").find('label[for="'+j+'"]').attr("for",j.replace(g,e));i.attr("id",j.replace(g,e))}else{d.parents(".pwpfd-wrapper").find('label[for="'+j+'"]').prop("for",j+"-"+c);i.attr("id",j+"-"+c)}}})}function p(){if(c.allowEmptyFields)return false;var b=false;f.each(function(){var c=a(this);if(!c.val()||""==c.val()){c.focus();b=true;return false}});return b}function q(){var b=d.parents(".pwpfd-wrapper").find(".pwpfd-remove");if(b.length){b.off().click(function(b){b.preventDefault();a(this).parent(".pwpfd-duplicate-this").hide("fast",function(){a(this).remove();n()});return false})}}};a.fn.premiseFieldDuplicate.defaults={displayAddButton:true,autoDuplicate:true,allowEmptyFields:false,startCount:0,onCopy:function(){return true},onRemove:function(){return true}}})(jQuery);(function(a){a.fn.premiseFieldFaIcon=function(b){var c=a.extend({},a.fn.premiseFieldFaIcon.defaults,b);if(this.length===0){return this}if(this.length>1){this.each(function(){a(this).premiseFieldFaIcon(b)});return this}var d=this,e=a(d),f=e.parent(".premise-field-fa_icon"),g=f.length?f.find(".premise-choose-icon"):{},h=f.length?f.find(".premise-remove-icon"):{},i=f.length?f.find(".premise-field-fa-icons-container"):{},j=i.length?i.find(".premise-field-fa-icon-anchor"):{},k=a("body"),l=a(document),m=false;var n=function(){if(e.is(".premise-fa-icon-plugin-active"))return false;o();p()};var o=function(){if(!e.is(".premise-field-fa_icon-input"))e.addClass("premise-field-fa_icon-input");if(!f.length)q();if(!g.length)r();if(!h.length)s();if(!i.length)t()};var p=function(){g.click(u);h.click(x);e.keyup(z);e.addClass("premise-fa-icon-plugin-active")};var q=function(){e.wrap('<div class="premise-field-fa_icon"></div>');f=e.parent(".premise-field-fa_icon")};var r=function(){var b=a('<a href="javascript:void(0);" class="premise-choose-icon"><i class="fa fa-fw fa-th"></i></a>');f.append(b);g=f.find(".premise-choose-icon")};var s=function(){var b=a('<a href="javascript:void(0);" class="premise-remove-icon"><i class="fa fa-fw fa-times"></i></a>');f.append(b);h=f.find(".premise-remove-icon")};var t=function(){var b=false;if(!b){a.post("/wp-admin/admin-ajax.php",{action:"premise_field_load_fa_icons_ajax"},function(a){b=true;f.append(a);i=f.find(".premise-field-fa-icons-container");j=i.find(".premise-field-fa-icon-anchor")})}};var u=function(){i.slideToggle("fast",function(){!m&&i.is(":visible")?v():w()});return false};var v=function(){k.addClass("premise-field-fa-icon-container-visible");y();l.trigger("premiseFieldAfterFaIconsOpen",[i,a(d)]);m=true};var w=function(){k.removeClass("premise-field-fa-icon-container-visible");l.trigger("premiseFieldAfterFaIconsClose",[i,a(d)]);m=false};var x=function(){e.val("")};var y=function(){j.off().one().click(function(){var b=a(this).attr("data-icon");e.val(b);u();return false})};var z=function(){var b=e.val();if(!m&&1>=b.length){u()}j.each(function(c,d){var e=a(this),f=e.attr("data-icon"),g=e.parents(".premise-field-fa-icon-li");!f.match(b)?g.hide():g.show()})};n();return this};a.fn.premiseFieldFaIcon.defaults={}})(jQuery);(function(a){a.fn.premiseFieldWpMedia=function(b){if(this.length===0){return this}var c=a.extend({},a.fn.premiseFieldWpMedia.defaults,b);var d=this;var e=a(d),f=e.parent(),g=e.siblings(".premise-btn-upload"),h=e.siblings(".premise-btn-remove"),i,j=[];if(this.length>1){this.each(function(){a(this).premiseFieldWpMedia(b)});return this}var k=function(){if(!e.is('input[type="text"]')){console.error('premiseFieldWpMedia() must be called on an input element with type="text".');return false}if(c.wrap)e.wrap('<div class="premise-field-wp_media"></div>');if(c.preview&&""!==e.val()){var b=e.val().split(",");for(var d=b.length-1;d>=0;d--){if(b[d].match(/(jpg|png|gif|jpeg)/gi)){j.push(b[d])}}o()}var f=e.attr("data-options");if(""!==f){var g=a.parseJSON(f);c=a.extend({},c,g)}q()};var l=function(){if(!wp.media){console.error("wp.media object is undefined. Make sure Wordpress Media Uploader Scripts are enqueued.");return false}if(i){i.open();return}i=wp.media.frames.file_frame=wp.media({title:"Upload Media",button:{text:"Insert Media"},multiple:c.multiple});i.on("select",function(){var b=i.state().get("selection").toJSON();j=[];a(b).each(function(a,b){if("id"===c.return){j.push(b.id)}else if("url"===c.return){var d="image"==b.type&&b.subtype.match(/(jpg|png|gif|jpeg)/gi)?b.sizes[c.imageSize].url:b.url;j.push(d)}});m()});i.open()};var m=function(){e.val(j.join());if(c.preview&&"url"==c.return)o()};var n=function(){e.val("");return false};var o=function(){if(j.length>0){var b=f.find(".premise-wp_media-preview"),c=j.length;if(!b.length){f.append(a('<div class="premise-wp_media-preview"></div>'));b=f.find(".premise-wp_media-preview")}b.html(p())}};var p=function(){var a='<div class="premise-row premise-wp_media-preview-inner">';if(j.length>1){for(var b=0;b<j.length;b++){var c=6>j.length?j.length:6;a+='<span class="premise-preview-thumb col'+c+'" style="background-image: url('+j[b]+');"></span>'}}else{a+='<span class="premise-preview-thumb span12" style="background-image: url('+j[0]+');"></span>'}a+="</div>";console.log(a);return a};var q=function(){if(!h.length){f.append(a('<a class="premise-btn-remove" href="javascript:void(0);"><i class="fa fa-fw fa-times"></i></a>'));h=a(".premise-btn-remove")}if(!g.length){f.append(a('<a class="premise-btn-upload" href="javascript:void(0);"><i class="fa fa-fw fa-upload"></i></a>'));g=a(".premise-btn-upload")}g.click(function(){console.log("upload btn was clicked");l()});h.click(function(){console.log("delete btn clicked");n()})};k();return this};a.fn.premiseFieldWpMedia.defaults={multiple:false,imageSize:"full","return":"url",preview:false,wrap:true}})(jQuery);var PremiseField={init:function(){jQuery(document).trigger("premiseFieldAfterInit",this)}};function premiseSameHeight(a){a=a||".premise-same-height";var b=0,c;var d=jQuery(a).each(function(){if(c){return false}c=jQuery(this).attr("data-height");if(c){b=c;return false}var a=jQuery(this).outerHeight();if(a>b){b=a}});var e=jQuery(a).css("min-height",b);jQuery.when(d).done(e);return false}function premiseCountVisibleElements(a){a=a||[];var b=0;a.each(function(a,c){if(jQuery(c).is(":visible")){b++}});return b}function premiseBrowserName(){var a=navigator.userAgent.toLowerCase();if(a.indexOf("opera")!=-1)return"Opera";if(a.indexOf("staroffice")!=-1)return"Star Office";if(a.indexOf("webtv")!=-1)return"WebTV";if(a.indexOf("beonex")!=-1)return"Beonex";if(a.indexOf("chimera")!=-1)return"Chimera";if(a.indexOf("netpositive")!=-1)return"NetPositive";if(a.indexOf("phoenix")!=-1)return"Phoenix";if(a.indexOf("firefox")!=-1)return"Firefox";if(a.indexOf("chrome")!=-1)return"Chrome";if(a.indexOf("safari")!=-1)return"Safari";if(a.indexOf("skipstone")!=-1)return"SkipStone";if(a.indexOf("msie")!=-1)return"Internet Explorer";if(a.indexOf("netscape")!=-1)return"Netscape";if(a.indexOf("mozilla/5.0")!=-1)return"Mozilla";if(a.indexOf("/")!=-1){if(a.substr(0,a.indexOf("/"))!="mozilla"){return navigator.userAgent.substr(0,a.indexOf("/"))}else return"Netscape"}else if(a.indexOf(" ")!=-1)return navigator.userAgent.substr(0,a.indexOf(" "));else return navigator.userAgent}jQuery(function(a){a(document).ready(function(){var b=a(".premise-dynamic-row"),c=a(".premise-same-height"),d=a(".premise-wp-media-field"),e=a(".premise-field-fa_icon-input"),f=a(".premise-youtube-video");function g(){h();i()}function h(){b.length?b.premiseDynamicColumns():false;c.length?premiseSameHeight():false;d.length?d.premiseFieldWpMedia():false;e.length?e.premiseFieldFaIcon():false;f.length?f.premiseLoadYouTube():false}function i(){PremiseField.init()}g()})});