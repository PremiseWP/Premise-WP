/*! Premise-WP 2015-12-03 */
var PremiseAjax={};var PremiseField={tooltip:null,faShowIconsBtn:null,faHideIconsBtn:null,faInputField:null,init:function(){this.tooltip=jQuery(".premise-field .premise-tooltip");this.faShowIconsBtn=jQuery(".premise-field-fa_icon .premise-choose-icon");this.faHideIconsBtn=jQuery(".premise-field-fa_icon .premise-remove-icon");this.faSelectIconBtn=jQuery(".premise-field-fa-icon-anchor");this.faInputField=jQuery(".premise-field-fa_icon .premise-fa_icon");this.bindEvents();jQuery(document).trigger("premiseFieldAfterInit",this)},bindEvents:function(){if(jQuery(".premise-field-type-wp_media").length>0){PremiseField.WPMedia.bindPreview()}if(this.tooltip.length>0){this.tooltip.mouseenter(this.adjustTooltip)}this.faShowIconsBtn.click(PremiseField.faIcon.showIcons);this.faInputField.focus(PremiseField.faIcon.showIcons);this.faHideIconsBtn.click(function(){PremiseField.faIcon.hideIcons(true)});this.faInputField.keyup(PremiseField.faIcon.filterIcons);this.faSelectIconBtn.click(PremiseField.faIcon.insertIcon);jQuery(document).on("premiseFieldAfterInit",function(){console.log("PremiseField Object Initited successfully.")})},adjustTooltip:function(){var a=PremiseField;var b=jQuery(window).width(),c=jQuery(window).height(),d=jQuery(this),e=d.find(".premise-tooltip-inner"),f=d.find(".premise-tooltip-inner:after"),g=e.outerWidth(true),h=e.outerHeight(true),i;var j=e.offset().top-h>h?"top":"bottom";if(e.offset().left<0){i=e.offset().left*-1}else if(e.offset().left+g>b){i="-"+(e.offset().left+g)-b}d.addClass("premise-tooltip-"+j);e.css("margin-left",i+"px");d.mouseleave(function(){d.removeClass("premise-tooltip-"+j);e.removeAttr("style")});return false}};PremiseField.faIcon={showIcons:function(){var a=PremiseField.faIcon,b=jQuery(this).parents(".premise-field"),c=b.find(".premise-field-fa-icons-container");jQuery(c).show("fast");jQuery("body").addClass("premise-field-fa-icon-container-visible");jQuery(document).trigger("premiseFieldAfterFaIconsOpen",c,b);return false},hideIcons:function(a){a="boolean"===typeof a?a:false;var b=window.event,c=jQuery(b.target).parents(".premise-field"),d=c.find(".premise-field-fa-icons-container");if(true===a){c.find("input.premise-fa_icon").val("")}jQuery(d).hide("fast");jQuery("body").removeClass("premise-field-fa-icon-container-visible");jQuery(document).trigger("premiseFieldAfterFaIconsClose",d,c);return false},insertIcon:function(){var a=jQuery(this).attr("data-icon");jQuery(this).parents(".premise-field").find("input.premise-fa_icon").val(a);PremiseField.faIcon.hideIcons()},filterIcons:function(a){a=a||window.event;var b=PremiseField.faIcon,c=jQuery(this),d=c.parents(".premise-field"),e=d.find(".premise-field-fa-icons-container .premise-field-fa-icon-li"),f=c.val();e.each(function(a,b){var c=jQuery(this).find(".premise-field-fa-icon-anchor").attr("data-icon");if(!c.match(f)){jQuery(this).hide()}else{jQuery(this).show()}})}};PremiseField.WPMedia={uploader:null,isMulti:false,mediaUploaded:[],mediaSaved:[],previewContainers:[],hasPreview:false,init:function(a){this.mediaField=jQuery(a).parent(".premise-field-wp_media").find("input.premise-file-url");this.isMulti=this.mediaField.attr("multiple")?true:false;this.bindEvents();this.upload()},bindEvents:function(){},bindPreview:function(){var a=PremiseField.WPMedia;if(jQuery(".premise-field-type-wp_media.premise-field-preview").length>0){a.previewContainers=jQuery(".premise-field-type-wp_media.premise-field-preview");a.hasPreview=true;a.setPreview()}return false},upload:function(){PremiseField.WPMedia.mediaUploaded=[];if(PremiseField.WPMedia.uploader){PremiseField.WPMedia.uploader.open();return}PremiseField.WPMedia.uploader=wp.media.frames.file_frame=wp.media({title:"Upload Media",button:{text:"Insert Media"},multiple:PremiseField.WPMedia.isMulti});PremiseField.WPMedia.onInsert();PremiseField.WPMedia.uploader.open()},onInsert:function(){PremiseField.WPMedia.uploader.on("select",function(){attachment=PremiseField.WPMedia.uploader.state().get("selection").toJSON();PremiseField.WPMedia.mediaUploaded=[];jQuery(attachment).each(function(a,b){PremiseField.WPMedia.mediaUploaded.push(attachment[a].url)});PremiseField.WPMedia.handleFiles()})},handleFiles:function(){var a=PremiseField.WPMedia;a.mediaField.val(a.mediaUploaded);if(a.hasPreview){var b=a.mediaField.parents(".premise-field-type-wp_media.premise-field-preview");a.insertPreview(b,a.mediaUploaded)}},removeFile:function(a){jQuery(a).parent(".premise-field-wp_media").find(".premise-file-url").val("");var b=PremiseField.WPMedia;if(b.hasPreview){b.removePreview(jQuery(a).parents(".premise-field-type-wp_media.premise-field-preview"))}return false},setPreview:function(){var a=PremiseField.WPMedia;a.previewContainers.each(function(){var b=jQuery(this),c=b.find(".premise-file-url").val();if(c&&""!==c){var d=c.split(",");a.insertPreview(b,d)}})},insertPreview:function(a,b){a=a||{};b=b||{};if(b.length>0){var c=PremiseField.WPMedia,d=b.length,e="";c.removePreview(a);e='<div class="premise-wp_media-preview"><div class="premise-wp_media-preview-inner">';if(d>1){for(var f=0;f<d;f++){e+='<span class="premise-preview-thumb premise-preview-thumb-multi" style="background-image: url('+b[f]+');"></span>'}}else{e+='<span class="premise-preview-thumb" style="background-image: url('+b+');"></span>'}e+="</div></div>";a.append(e)}return false},removePreview:function(a){a.find(".premise-wp_media-preview").remove()}};jQuery(function(a){PremiseField.init()});function premiseSameHeight(a){a=a||".premise-same-height";var b=0,c;var d=jQuery(a).each(function(){if(c){return false}c=jQuery(this).attr("data-height");if(c){b=c;return false}var a=jQuery(this).outerHeight();if(a>b){b=a}});var e=jQuery(a).css("min-height",b);jQuery.when(d).done(e);return false}function premiseCountVisibleElements(a){a=a||[];var b=0;a.each(function(a,c){if(jQuery(c).is(":visible")){b++}});return b}