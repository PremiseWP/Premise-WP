/*! Premise-WP 2016-04-28 */
var PremiseAjax={};(function(a){a.fn.premiseFieldFaIcon=function(b){var c=a.extend({},a.fn.premiseFieldFaIcon.defaults,b);if(this.length===0){return this}if(this.length>1){this.each(function(){a(this).premiseFieldFaIcon(b)});return this}var d=this,e=a(d).find(".premise-field-fa_icon"),f=e.find(".premise-fa_icon"),g=e.find(".premise-choose-icon"),h=e.find(".premise-remove-icon"),i=a(d).find(".premise-field-fa-icons-container"),j=i.find(".premise-field-fa-icon-anchor"),k=a("body"),l=a(document),m=false;var n=function(){g.click(o);h.click(r);f.keyup(t)};var o=function(){i.slideToggle("fast",function(){!m&&i.is(":visible")?p():q()})};var p=function(){k.addClass("premise-field-fa-icon-container-visible");s();l.trigger("premiseFieldAfterFaIconsOpen",[i,a(d)]);m=true};var q=function(){k.removeClass("premise-field-fa-icon-container-visible");l.trigger("premiseFieldAfterFaIconsClose",[i,a(d)]);m=false};var r=function(){f.val("")};var s=function(){j.off().click(function(){var b=a(this).attr("data-icon");f.val(b);o();return false})};var t=function(){var b=f.val();if(!m&&1>=b.length){o()}j.each(function(c,d){var e=a(this),f=e.attr("data-icon"),g=e.parents(".premise-field-fa-icon-li");!f.match(b)?g.hide():g.show()})};n();return this};a.fn.premiseFieldFaIcon.defaults={}})(jQuery);(function(a){a.fn.premiseFieldWpMedia=function(b){if(this.length===0){return this}var c=a.extend({},a.fn.premiseFieldWpMedia.defaults,b);if(this.length>1){this.each(function(){a(this).premiseFieldWpMedia(b)});return this}var d=this;var e=a(d),f,g,h,i,j=[];var k=function(){if(e.is('input[type="text"]')){f=e;h=e.siblings(".premise-btn-remove");g=e.siblings(".premise-btn-upload");if(!h.length){h=a('<a class="premise-btn-remove" href="javascript:void(0);"><i class="fa fa-fw fa-times"></i></a>');f[0].parentNode.insertBefore(h[0],f[0].nextSibling)}if(!g.length){g=a('<a class="premise-btn-upload" href="javascript:void(0);"><i class="fa fa-fw fa-upload"></i></a>');f[0].parentNode.insertBefore(g[0],f[0].nextSibling)}}else{f=e.find(".premise-file-url");g=e.find(".premise-btn-upload");h=e.find(".premise-btn-remove")}var b=f.attr("data-options");if(""!==b){var d=a.parseJSON(b);c=a.extend({},c,d)}console.log(c);g.click(l);h.click(n)};var l=function(){if(i){i.open();return}i=wp.media.frames.file_frame=wp.media({title:"Upload Media",button:{text:"Insert Media"},multiple:c.multiple});i.on("select",function(){var b=i.state().get("selection").toJSON();j=[];a(b).each(function(a,b){console.log(b);if("id"===c.return){j.push(b.id)}else if("url"===c.return){var d="image"==b.type&&b.subtype.match(/(jpg|png|gif|jpeg)/gi)?b.sizes[c.imageSize].url:b.url;j.push(d)}});m()});i.open();return false};var m=function(){f.val(j.join());if(c.preview)o()};var n=function(){f.val("");return false};var o=function(){};k();return this};a.fn.premiseFieldWpMedia.defaults={multiple:false,imageSize:"full","return":"url",preview:false}})(jQuery);var PremiseField={init:function(){this.bindEvents();var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";var b=document.getElementsByTagName("script")[0];var c=document.createElement("script");c.innerHTML="function onYouTubeIframeAPIReady(){return ( jQuery( '.premise-youtube-video' ).length ) ? PremiseField.YTPlayer.init() : false;}";b.parentNode.insertBefore(c,b);b.parentNode.insertBefore(a,b);jQuery(document).trigger("premiseFieldAfterInit",this)},bindEvents:function(){jQuery(".premise-field-type-wp_media").premiseFieldWpMedia();jQuery(".premise-field-type-fa_icon").premiseFieldFaIcon();jQuery(document).on("premiseFieldAfterInit",function(){console.log("PremiseField Object Initited successfully.")})}};PremiseField.WPMedia={uploader:null,isMulti:false,mediaUploaded:[],mediaSaved:[],previewContainers:[],hasPreview:false,init:function(a){this.mediaField=jQuery(a).parent(".premise-field-wp_media").find("input.premise-file-url");this.isMulti=this.mediaField.attr("multiple")?true:false;this.bindEvents();this.upload()},bindEvents:function(){},bindPreview:function(){var a=PremiseField.WPMedia;if(jQuery(".premise-field-type-wp_media.premise-field-preview").length>0){a.previewContainers=jQuery(".premise-field-type-wp_media.premise-field-preview");a.hasPreview=true;a.setPreview()}return false},upload:function(){PremiseField.WPMedia.mediaUploaded=[];if(PremiseField.WPMedia.uploader){PremiseField.WPMedia.uploader.open();return}PremiseField.WPMedia.uploader=wp.media.frames.file_frame=wp.media({title:"Upload Media",button:{text:"Insert Media"},multiple:PremiseField.WPMedia.isMulti});PremiseField.WPMedia.onInsert();PremiseField.WPMedia.uploader.open()},onInsert:function(){PremiseField.WPMedia.uploader.on("select",function(){attachment=PremiseField.WPMedia.uploader.state().get("selection").toJSON();PremiseField.WPMedia.mediaUploaded=[];jQuery(attachment).each(function(a,b){PremiseField.WPMedia.mediaUploaded.push(attachment[a].url)});PremiseField.WPMedia.handleFiles()})},handleFiles:function(){var a=PremiseField.WPMedia;a.mediaField.val(a.mediaUploaded);if(a.hasPreview){var b=a.mediaField.parents(".premise-field-type-wp_media.premise-field-preview");a.insertPreview(b,a.mediaUploaded)}},removeFile:function(a){jQuery(a).parent(".premise-field-wp_media").find(".premise-file-url").val("");var b=PremiseField.WPMedia;if(b.hasPreview){b.removePreview(jQuery(a).parents(".premise-field-type-wp_media.premise-field-preview"))}return false},setPreview:function(){var a=PremiseField.WPMedia;a.previewContainers.each(function(){var b=jQuery(this),c=b.find(".premise-file-url").val();if(c&&""!==c){var d=c.split(",");a.insertPreview(b,d)}})},insertPreview:function(a,b){a=a||{};b=b||{};if(b.length>0){var c=PremiseField.WPMedia,d=b.length,e="";c.removePreview(a);e='<div class="premise-wp_media-preview"><div class="premise-wp_media-preview-inner">';if(d>1){for(var f=0;f<d;f++){e+='<span class="premise-preview-thumb premise-preview-thumb-multi" style="background-image: url('+b[f]+');"></span>'}}else{e+='<span class="premise-preview-thumb" style="background-image: url('+b+');"></span>'}e+="</div></div>";a.append(e)}return false},removePreview:function(a){a.find(".premise-wp_media-preview").remove()}};PremiseField.YTPlayer={init:function(){(function(a){PremiseField.YTPlayer.initPlayer(a,YT)})(jQuery)},initPlayer:function(a){console.log("YT run !");var b=a(".premise-youtube-video");if(b.length>0){b.each(function(b,c){var d=a(this).attr("data-premise-youtube-video-id"),e=new YT.Player(a(this).attr("id"),{height:a(this).css("height"),width:a(this).css("width"),videoId:d,playerVars:{autoplay:1,playlist:[d]},events:{onReady:PremiseField.YTPlayer.playerReady,onStateChange:""}});e.setLoop=true})}},playerReady:function(a){a.target.setVolume(0)}};function onYouTubeIframeAPIReady(){console.log("api ready")}function premiseSameHeight(a){a=a||".premise-same-height";var b=0,c;var d=jQuery(a).each(function(){if(c){return false}c=jQuery(this).attr("data-height");if(c){b=c;return false}var a=jQuery(this).outerHeight();if(a>b){b=a}});var e=jQuery(a).css("min-height",b);jQuery.when(d).done(e);return false}function premiseCountVisibleElements(a){a=a||[];var b=0;a.each(function(a,c){if(jQuery(c).is(":visible")){b++}});return b}jQuery(function(a){a(document).ready(function(){Premise.init()})});var Premise={browserMobile:false,init:function(){PremiseField.init()},whichBrs:function(){var a=navigator.userAgent.toLowerCase();if(a.indexOf("opera")!=-1)return"Opera";if(a.indexOf("staroffice")!=-1)return"Star Office";if(a.indexOf("webtv")!=-1)return"WebTV";if(a.indexOf("beonex")!=-1)return"Beonex";if(a.indexOf("chimera")!=-1)return"Chimera";if(a.indexOf("netpositive")!=-1)return"NetPositive";if(a.indexOf("phoenix")!=-1)return"Phoenix";if(a.indexOf("firefox")!=-1)return"Firefox";if(a.indexOf("chrome")!=-1)return"Chrome";if(a.indexOf("safari")!=-1)return"Safari";if(a.indexOf("skipstone")!=-1)return"SkipStone";if(a.indexOf("msie")!=-1)return"Internet Explorer";if(a.indexOf("netscape")!=-1)return"Netscape";if(a.indexOf("mozilla/5.0")!=-1)return"Mozilla";if(a.indexOf("/")!=-1){if(a.substr(0,a.indexOf("/"))!="mozilla"){return navigator.userAgent.substr(0,a.indexOf("/"))}else return"Netscape"}else if(a.indexOf(" ")!=-1)return navigator.userAgent.substr(0,a.indexOf(" "));else return navigator.userAgent}};